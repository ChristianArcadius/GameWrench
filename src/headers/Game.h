#pragma once

#include "GameMap.h"

namespace gw {

/// The class resonpsible for running the game.
/// Manages the game window, updating game state, and displaying each frame.
class Game
{
public:

////////////////////////////////////////////////////////////////////////////////////////////////////
// Constructors
////////////////////////////////////////////////////////////////////////////////////////////////////

    Game(GameMap& map, Vector2u resolution = Vector2u(800, 800), std::string name = "GameWrench");

    Game(GameMap& map, int resolutionX = 800, int resolutionY = 800,
        std::string name = "GameWrench");

    virtual ~Game() = default;

////////////////////////////////////////////////////////////////////////////////////////////////////
// Mutators
////////////////////////////////////////////////////////////////////////////////////////////////////

    void outputFrame();

////////////////////////////////////////////////////////////////////////////////////////////////////
// Accessors
////////////////////////////////////////////////////////////////////////////////////////////////////

    bool isPlaying() const { return running; }
    float elapsedTime() const { return totalTime; }

////////////////////////////////////////////////////////////////////////////////////////////////////
// Public Members
////////////////////////////////////////////////////////////////////////////////////////////////////

    GameMap& map;               // Map of the video game
    sf::RenderWindow window;    // App window that displays the game

private:

////////////////////////////////////////////////////////////////////////////////////////////////////
// Private Members
////////////////////////////////////////////////////////////////////////////////////////////////////

    float deltaTime;    // The time between the previous two frames
    float totalTime;    // Total in-game seconds since first frame output
    bool running;       // Has the game been paused or closed
    sf::Clock clock;    // Timer used to get deltaTime
};  

} // namespace gw